<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Learning Journey Planning System</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <title>View Job Roles</title>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Handlee&family=Nunito&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Flaticon Font -->
    <link href="lib/flaticon/font/flaticon.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <!-- Navbar Start -->
    <div class="container-fluid bg-light position-relative shadow">
        <nav class="navbar navbar-expand-lg bg-light navbar-light py-3 py-lg-0 px-0 px-lg-5">
            <a class="navbar-brand font-weight-bold text-secondary" style="font-size: 50px;">
                <i class="flaticon-043-teddy-bear"></i>
                <span class="text-primary">LJPS</span>
            </a>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                <div class="navbar-nav font-weight-bold mx-auto py-0">
                    <a href="staffHomepage.html" class="nav-item nav-link active">Home</a>
                    <a href="staffViewRoles.html" class="nav-item nav-link">Job Role</a>
                    <a href="staffLearningJourney.html" class="nav-item nav-link">My Learning Journey</a>
                </div>
            </div>
        </nav>
    </div>
    <!-- Navbar End -->


    <!-- Header Start -->
    <div class="container-fluid bg-primary mb-5">
        <div class="d-flex flex-column align-items-center justify-content-center" style="min-height: 250px">
            <img src="img/homepage-1.JPG" class="img-fluid">
        </div>
    </div>
    <!-- Header End -->

    <!-- Content Start -->
    <div id="main-container" class="container">
        <h1 class="text-center">"Learning is never too late"</h1>
        <br>
        <h5>Welcome, {{staff.Staff_Fname}} {{staff.Staff_Lname}}</h5>
        <h5>Department: {{staff.Dept}}</h5>
        <!--<h5>Role: {{roleName}}</h5>-->
        <br>

        <h2 class="text-center">Some of the Job Roles Available</h2>
        <br>
        <div class="row">
            <div class="col-sm-4" v-for="jobRole in jobRoleList">
                <div class="card h-100">
                    <div class="card-body d-flex flex-column text-center">
                        <h5 class="card-title">{{ jobRole.JobRole_Name }}</h5>
                        <div class="row">
                            <div class="col-xs">
                                <h6 class="card-text ">Skills required</h6>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs">
                                <p class="card-text"><skills-comp :id="jobRole.JobRole_ID"></skills-comp></p>
                            </div>
                        </div>
                        <br>
                        <!--<div class="d-grid gap-2 mx-auto">-->
                            <a href="staffViewRoles.html" class="btn btn-primary mt-auto">More job roles available</a>
                        <!--</div>-->
                    </div>
                </div>
            </div>
        </div>
        <br>
        <br>
        <br>
        <br>
        <br>
        <h2 class="text-center">Learning Journey</h2>
        <br>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-6">
                    <img src="img/homepage-2.png" class="img-fluid">
                </div>
                <div class="d-flex flex-column align-items-center justify-content-center col-sm-6 bg-primary">
                    <div class="p-5 bg-light text-dark">
                        <p class="fw-bold">
                            In All-In-One, we believe that continuous learning is the minimum requirement for success in any field. 
                            Learning journeys help our staff to plan and track courses that they can take up to prepare themselves for their 
                            aspiring positions by acquiring new skills. We hope Learning Journey Planning System allows you to achieve your goals!
                        </p>
                        <br>
                        <div class="d-grid gap-2 mx-auto">
                            <a href="staffLearningJourney.html" class="btn btn-primary justify-content-center">Visit your learning journeys</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Content End -->


    <!-- Footer Start -->
    <div class="container-fluid bg-secondary text-white mt-5 py-5 px-sm-3 px-md-5">
        <p class="m-0 text-center text-white">
            &copy; <a class="text-primary font-weight-bold" href="#">Learning Journey Planning System</a>. All Rights Reserved. Designed
            by
            <a class="text-primary font-weight-bold" href="https://htmlcodex.com">HTML Codex</a>
        </p>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-primary p-3 back-to-top"><i class="fa fa-angle-double-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/isotope/isotope.pkgd.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    <!-- Vue -->
    <script>
        Vue.component('skills-comp', {
            props: ['id'],
            template: '<div class="d-flex"><ul class="mx-auto"><li v-for="skill in skills">{{skill.Skill_Name}}</li></ul></div>',
            data: function () {
                return {
                    skills: []
                };
            },
            created: function () {
                axios.get('http://localhost:5001/StaffViewJobRolesWithSkills/' + this.id)
                .then(response => {
                    this.skills = response.data.data;
                });
            }
        });

        const vm = new Vue({
            el: '#main-container',
            data: {
                staff: [],
                jobRoleList: [],
                roleID: '',
                roleName: '',
                id: ''
            },
            mounted: function() {
                var staffID = localStorage.getItem("StaffID")

                axios.all([
                    axios.get('http://localhost:5001/StaffDetails/'+staffID),
                    axios.get('http://localhost:5001/TopThreeActiveJobRoles')
                ])
                .then(axios.spread((response1, response2) => {
                    this.staff = response1.data.data;
                    this.jobRoleList = response2.data.data;
                    this.roleID = this.staff.Role_ID
                    this.getRoleName()
                }))
                .catch(error => alert(error));
            },
            methods:{
                getRoleName(){
                    axios.get('http://localhost:5001/StaffRole/'+this.roleID)
                    .then(response => {
                        this.roleName = response.data.data;
                    });
                }
            }

            });
    </script>

</body>

</html>